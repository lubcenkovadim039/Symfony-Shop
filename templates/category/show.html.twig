{% extends 'base.html.twig' %}

{% block title %}{{ category.name }}{% endblock %}

{% block body %}
    <h1 >{{ category.name }}</h1>

    <ul>
        {% if category.parent %}
        <li>
            <a href="{{ path('category_show', {id: category.parent.id}) }}">Назад</a>
        </li>
        {% endif %}

        {% for subcategory in category.subcategories %}
            <li>
            <a href="{{ path('category_show',{id:subcategory.id}) }}">
                {{ subcategory.name }}
            </a></li>
        {% endfor %}
    </ul>

    <div class="card-deck product">
        {% for product in category.products %}
            <div class="card" style="width: 18rem;">
                <img class="card-img-top" src="
                    {%- if product.imageName -%}{{ vich_uploader_asset(product,'imageFile') | imagine_filter('squared_product_thumbnail') }}
                    {%- else -%} //placehold.it/300x300
                    {%- endif -%}
                                 " alt="{{ product.title }}">
            </div>
                <div class="card-body">
                <h5 class="card-title">
                    <a href="{{ path('product_show',{id:product.id}) }}" >{{ product.title }}
                    </a></h5>
                <p class="card-text">{{ product.price }}</p>
                <p class="card-text">{{ product.description }}</p>
            </div>
            <div class="card-primary">
                <a href="{{ path('order_add_to_cart', {'id':product.id}) }}" class="btn btn-default">Добавить в корзину</a>
            </div>
    </div>
        {% endfor %}
    </div>
{% endblock %}
